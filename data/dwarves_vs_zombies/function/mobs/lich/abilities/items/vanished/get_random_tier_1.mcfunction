execute if entity @a[tag=lich,gamemode=creative] run execute store result storage dwarves_vs_zombies lich_random int 1.0 run random value 0..3

execute if entity @a[tag=lich,gamemode=creative] run execute if data storage dwarves_vs_zombies {lich_random:0} if entity @a[tag=lich,nbt={Inventory:[{id:"minecraft:candle"},{id:"minecraft:chain"},{id:"minecraft:twisting_vines"},{id:"minecraft:feather"}]}] run return fail

execute if entity @a[tag=lich,gamemode=creative] run execute if data storage dwarves_vs_zombies {lich_random:0} if entity @a[tag=lich,nbt={Inventory:[{id:"minecraft:candle"}]}] run return run function dwarves_vs_zombies:mobs/lich/abilities/items/vanished/get_random_tier_1
execute if entity @a[tag=lich,gamemode=creative] run execute if data storage dwarves_vs_zombies {lich_random:0} unless entity @a[tag=lich,nbt={Inventory:[{id:"minecraft:candle"}]}] run give @a[tag=lich] candle[enchantments={vanishing_curse:1},food={nutrition:0,saturation:0,can_always_eat:1b},consumable={consume_seconds:0,animation:none,sound:"entity.breeze.land"},custom_name=[{"text":"Snuff Out","italic":false,"color":"dark_red"}],lore=[[{"text":"Eventually all wax runs dry.","italic":false,"color":"blue"}],"",[{"text":"Use item (","italic":false,"color":"gray"},{"text":"Right Click","italic":false,"color":"dark_red"},{"text":") to ","italic":false,"color":"gray"},{"text":"Extinguish Lights","italic":false,"color":"dark_red"}]],enchantment_glint_override=false,tooltip_display={hidden_components:[enchantments]}]

execute if entity @a[tag=lich,gamemode=creative] run execute if data storage dwarves_vs_zombies {lich_random:1} if entity @a[tag=lich,nbt={Inventory:[{id:"minecraft:chain"}]}] run return run function dwarves_vs_zombies:mobs/lich/abilities/items/vanished/get_random_tier_1
execute if entity @a[tag=lich,gamemode=creative] run execute if data storage dwarves_vs_zombies {lich_random:1} unless entity @a[tag=lich,nbt={Inventory:[{id:"minecraft:chain"}]}] run give @a[tag=lich] chain[enchantments={vanishing_curse:1},food={nutrition:0,saturation:0,can_always_eat:1b},consumable={consume_seconds:0,animation:none,sound:"block.anvil.place"},custom_name=[{"text":"Enclose","italic":false,"color":"dark_red"}],lore=[[{"text":"Build a cage for the animals.","italic":false,"color":"blue"}],"",[{"text":"Use item (","italic":false,"color":"gray"},{"text":"Right Click","italic":false,"color":"dark_red"},{"text":") to ","italic":false,"color":"gray"},{"text":"Create Spawner","italic":false,"color":"dark_red"}]],enchantment_glint_override=false,tooltip_display={hidden_components:[enchantments]}]

execute if entity @a[tag=lich,gamemode=creative] run execute if data storage dwarves_vs_zombies {lich_random:2} if entity @a[tag=lich,nbt={Inventory:[{id:"minecraft:twisting_vines"}]}] run return run function dwarves_vs_zombies:mobs/lich/abilities/items/vanished/get_random_tier_1
execute if entity @a[tag=lich,gamemode=creative] run execute if data storage dwarves_vs_zombies {lich_random:2} unless entity @a[tag=lich,nbt={Inventory:[{id:"minecraft:twisting_vines"}]}] run give @a[tag=lich] twisting_vines[enchantments={vanishing_curse:1},food={nutrition:0,saturation:0,can_always_eat:1b},consumable={consume_seconds:0,animation:none,sound:"block.copper_bulb.break"},custom_name=[{"text":"Smite","italic":false,"color":"dark_red"}],lore=[[{"text":"Justice from above!","italic":false,"color":"blue"}],"",[{"text":"Use item (","italic":false,"color":"gray"},{"text":"Right Click","italic":false,"color":"dark_red"},{"text":") to ","italic":false,"color":"gray"},{"text":"Strike Lightning","italic":false,"color":"dark_red"}]],enchantment_glint_override=false,tooltip_display={hidden_components:[enchantments]}]


execute if entity @a[tag=lich,gamemode=creative] run execute if data storage dwarves_vs_zombies {lich_random:3} if entity @a[tag=lich,nbt={Inventory:[{id:"minecraft:feather"}]}] run return run function dwarves_vs_zombies:mobs/lich/abilities/items/vanished/get_random_tier_1
execute if entity @a[tag=lich,gamemode=creative] run execute if data storage dwarves_vs_zombies {lich_random:3} unless entity @a[tag=lich,nbt={Inventory:[{id:"minecraft:feather"}]}] run give @a[tag=lich] feather[enchantments={vanishing_curse:1},food={nutrition:0,saturation:0,can_always_eat:1b},consumable={consume_seconds:0,animation:none,sound:"entity.sheep.shear"},custom_name=[{"text":"Bewitch","italic":false,"color":"dark_red"}],lore=[[{"text":"Startled awake.","italic":false,"color":"blue"}],[{"text":"A visitor steps in through the wall.","italic":false,"color":"blue"}],"",[{"text":"Use item (","italic":false,"color":"gray"},{"text":"Right Click","italic":false,"color":"dark_red"},{"text":") to ","italic":false,"color":"gray"},{"text":"Summon Spirits","italic":false,"color":"dark_red"}]],enchantment_glint_override=false,tooltip_display={hidden_components:[enchantments]}]
